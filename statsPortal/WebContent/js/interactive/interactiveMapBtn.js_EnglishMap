
(function(W, D) {
	W.$interactiveMapBtn = W.$interactiveMapBtn || {};
	
	
	window.global_that = null; //20년수정반영(백지도추가)
	
	$(document).ready(function() {
		
		//20년수정반영 시작
		var timer = null;
		
		//djlee 추가  시작
		
		//mng_s 20201008 이진호
		//백지도 버튼 관련 css 수정으로 인한 주석 처리
		
			//$("body").on('mouseenter' , '#backMap' , function(){
			//if(global_that.map.mapMode == 'white'){
				//$("#white_child").show();
				//if(timer)clearInterval(timer);
			//}
			//return false;
		//});
		
		//$("body").on('mouseleave' , '#backMap' , function(){
			//if(global_that.map.mapMode == 'white'){
				//timer = setInterval(function(){
					//if(timer)clearInterval(timer);
					//$("#white_child").hide();
				//},1000);
			//}
			//return false;
		//});
		
		//$("body").on('mouseenter' , '#white_child' , function(){
			//if(global_that.map.mapMode == 'white'){
				//$("#white_child").show();
				//if(timer)clearInterval(timer);
			//}
			//return false;
		//});
		
		//$("body").on('mouseleave' , '#white_child' , function(){
			//if(global_that.map.mapMode == 'white'){
				//timer = setInterval(function(){
					//if(timer)clearInterval(timer);
					//$("#white_child").hide();
				//},1000);
			//}
			//return false;
		//});
		
		//mng_e 20201008 이진호
		//20년수정반영 끝		
	});
	
	interactiveMapBtnInfo = {
		btnInfo	: function(map, delegate) {
			var that = this;
			global_that = this; //20년수정반영 
			this.map = map;
			this.id = null;
			this.poiObj = null;
			this.setObj = null;
			this.mapObj = null;
			
			//mng_s 20200311 이진호
			//zoomtype 변경버튼 생성 
			this.zoomBtnObj=null;
			//mng_e 20200311 이진호
			
			this.year = companyDataYear;//dataYear; 2016.09.02 9월 서비스
			this.bndYear = bndYear;
			this.pageNum = "";
			this.center = null;
			this.mapBounds = null;
			this.themeCd = "";
			this.class_cd = "";
			this.resultcount = "500";
			this.isOpenPOI = false;
			this.selectedPoiTitle = "";
			this.companyTree = null;
			this.curSelectedCompanyNode = null;
			this.baseTileLayer = null;
			this.targetTileLayer = null;
			this.delegate = (delegate != undefined) ? delegate : null;
			this.isShow = false; //9월 서비스
			this.markerGroup = [];
			
			
			
			/**
			 * 
			 * @name         : initialize
			 * @description  : 초기화한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createUI = function(options) {
				var currentdate = new Date();
				this.id = makeStamp(currentdate);
				
				if (options != null) {
					if (options.intrPoiControl != undefined && options.intrPoiControl) {
						this.createPOIBtn();
					}else if (options.techPoiControl != undefined && options.techPoiControl) {
						this.createTechPOIBtn();
					}
					if (options.intrSettingControl != undefined && options.intrSettingControl) {
						this.createSettingBtn("intr");
					}else if (options.bizSettingControl != undefined && options.bizSettingControl) {
						this.createSettingBtn("biz");
					}else if (options.techSettingControl != undefined && options.techSettingControl) {
						this.createSettingBtn("tech");
					}
					if (options.mapTypeControl != undefined && options.mapTypeControl) {
						this.drawExportBox();	// 	20년수정반영 (이미지 저장 팝업관련)
						$(".dragbox").draggable();	// 	20년수정반영 (이미지 저장 팝업관련)
						this.createMapTypeBtn();
					}
					
					
					if (options.intrZoomControl != undefined && options.intrZoomControl) {
						this.createZoomControl("intr");
					}else if (options.combineZoomControl != undefined && options.combineZoomControl) {
						this.createZoomControl("combine");
					}else if (options.bizZoomControl != undefined && options.bizZoomControl) {
						this.createZoomControl("biz");
					}else if (options.themaZoomControl != undefined && options.themaZoomControl) {
						this.createZoomControl("thema");
					}
					//mng_s 20200311 이진호
					//zoomType 변경버튼 생성
					if (options.createZoomTypeBtn != undefined && options.createZoomTypeBtn) {
						this.createZoomTypeBtn();
					}
					//mng_e 20200311 이진호
					
				}else {
					this.createMapTypeBtn();
					
					
					this.createZoomControl();
					//mng_s 2020311 이진호
					//zoomType 변경버튼 생성
					this.createZoomTypeBtn();
					//mng_e 20200311 이진호
				}
				
				this.eventHandler();
			},
			
			/**
			 * 
			 * @name         : createPOIBtn
			 * @description  : 인터랙티브맵의 외부POI버튼을 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createPOIBtn = function() {
				var poiUI = sop.control({position: 'topright'});
				poiUI.onAdd = function (map) {
				    this._div = sop.DomUtil.create('div', 'info');
				    sop.DomEvent.disableClickPropagation(this._div);
				    this.update();
				    $(this._div).attr("id", 'poi_' +that.id);
				    that.poiObj = this._div;
				    return this._div;
				};
				poiUI.update = function (props) {
					var html = "";
					html += "<div class='mapBtnWrapper' data-html2canvas-ignore=true>";
					html += "<a class='rightQuick rq01'><span>GPS</span></a>";
					html += 	"<ul class='rqListBox rq01'>";	
					html +=		"<li><a class='ico_side_Select'><span id='industry'>산업<br />분류</span></a>";
					html +=			"<ol class='rqIcon09'>";
					html += 			"<li>";
	    			html +=					"<div class='sidePopTree'>";
	    			html +=						"<p class='tit' style='text-align:center;'>전국사업체조사 10차산업분류표 위치조회</p>";
	    			html +=						"<div class='etcPopScroll'>";
					html +=		    				"<div class='tree'></div>"; 
			        html +=						"</div>";
	    			html +=					"</div>";
	    			html +=				"</li>";
	    			html +=			"</ol>";
					html +=    	"</li>";
					html += 	"<li><a><span>생활<br />서비스</span></a>";	
					html += 		"<ol class='rqIcon01'></ol>";    				
					html += 	"</li>";     			
					
					//mng_s 20200615 이진호
					//도소매 --> 소매업 으로 변경
					//html += 	"<li><a><span>도소매</span></a>";    
					html += 	"<li><a><span>소매업</span></a>";
					html += 		"<ol class='rqIcon02'></ol>";    		
					//mng_e 20200615 이진호
					
					html += 	"</li>";     		
					html += 	"<li><a class='ico_side_Select'><span>교통</span></a>";      			
					html += 		"<ol class='rqIcon03'></ol>";    				
					html += 	"</li>";    				
					html += 	"<li><a class='ico_side_Select'><span>숙박</span></a>";    			
					html +=			"<ol class='rqIcon04'></ol>";
					html +=    	"</li>"; 
					html +=    	"<li><a class='ico_side_Select'><span>음식점</span></a>";
					html +=    		"<ol class='rqIcon05'></ol>";
					html +=    	"</li>"; 
					html +=    	"<li><a class='ico_side_Select'><span>공공</span></a>";
					html +=    		"<ol class='rqIcon06'></ol>";
					html +=    	"</li>";  
					html +=    	"<li><a class='ico_side_Select'><span>교육</span></a>";
					html +=    		"<ol class='rqIcon07'></ol>";
					html +=    	"</li>"; 
					html +=    	"<li><a class='ico_side_Select'><span>기업</span></a>";
					html +=    		"<ol class='rqIcon08'></ol>";
					html +=    	"</li>";
					html +=    	"<li><a class='ico_side_Select'><span>편의<br/>문화</span></a>";
					html +=    		"<ol class='rqIcon00'></ol>";
					html +=    	"</li>";
					html +=    	"<li id='poiInit_"+that.id+"'><a class='ico_side_Select'><span>초기화</span></a>";
					html +=    	"</li>";
					html += "</ul>";
					html += "</div>";
					this._div.innerHTML = html;
					 
				};
				poiUI.addTo(this.map.gMap);
				
				this.addLifePoiList();			
				this.addShopPoiList();			
				this.addTrafficPoiList();
				this.addLodgePoiList();
				this.addRestaurantPoiList();
				this.addPublicPoiList();
				this.addEduPoiList();
				this.addCompanyPoiList();
				this.addCulturePoiList();
				this.reqInterstryList(0, "10", null);		//20190314 leekh 산업분류 10차로 수정함
			},
			
			//20년수정반영 시작 (이미지 저장 팝업)
			/**
			 * 
			 * @name         : drawExportBox
			 * @description  : 지도 내보내기 박스
			 * @date         : 2019. 07. 02. 
			 * @author	     : 이동진
			 * @history 	 :
			 */
			this.drawExportBox = function() {
				var setUI = sop.control({position: 'topright'});
				setUI.onAdd = function (map) {
					this._div = sop.DomUtil.create('div', 'info');
					sop.DomEvent.disableClickPropagation(this._div);
					this.update();
					$(this._div).attr("id", 'set_' +that.id);				    
					that.mapObj = this._div;
					return this._div;
				};
				setUI.update = function (props) {	
					var html = "";					
					html += "<div class='popBox saveBox draw-label-setting dragbox imsiClass png_save_box' id='save_box' style='display:none; z-index:9; width: 295px; top:0px; margin-left:-643px;'>"; // djlee 20190527 수정
					html += 	"<div class='topbar'>";
					html += 		"<span>저장하기</span>";
					html += 			"<a href='javascript:void(0)'>닫기</a>";
					html += 	"</div>";
					html += 	"<div class='cont-box button-box' id='drawLabelColor' style='padding : 10px;'>";
					html += 			"<ul class='clearFix'>";
					html += 				"<li>";
					html += 					"<span class='radio-area'>" +
							"						<input type='radio' class='radio' name='sizeChoice' value='01' id='sizeChoice1' checked onclick=''>" +
							"								<label for='sizeChoice1'><span>현재 화면 크기로 저장</span></label>";
					html +=						"</span>";
					html +=				 	"</li>";
					html += 				"<li style='padding-top:10px;'>";
					html += 					"<span class='radio-area clearFix'>" +
							"						<input type='radio' class='radio' name='sizeChoice' value='02' id='sizeChoice2' onclick='' style='margin-right: 2px;'>";
					html += 						"<label for='sizeChoice2'><span>사용자지정</span></label>";
					// 20191230일 수정 반영 시작
					html += 						"<div class='select-wrap' style='display: inline-table;width: 55px;margin-left: 10px;'>" +
							"							<input type='text' id='width' style='width:65px;'/>" +
//							"								<option value='512' >512</option><option value='1024' >1024</option>" +
//							"								<option value='1536' >1536</option><option value='2048' >2048</option>" +
//							"							</select>" +
							"						</div><div style='padding:5px;display: inline-table;'>*</div>";
					html += 						"<div class='select-wrap' style='display: inline-table;width: 60px;'>" +
							"							<input type='text' id='height' style='width:70px;' />" +
//							"								<option value='512' >512</option><option value='1024' >1024</option>" +
//							"								<option value='1536' >1536</option><option value='2048' >2048</option>" +
//							"							</select>" +
							"						</div>";
					// 20191230일 수정 반영 끝
					html += 					"</span>";
					html += 				"</li>";
					html += 			"</ul>";
					html += 	"</div>";
					html += 	"<div class='popup-btn-area none' style='text-align: center;padding: 10px;'>";
					html += 		"<a href='javascript:convertImageProcess(\"preview\");' class='default-color btn-left-mg' style='padding: 5px; width: 80px;background: #0078A8;color: #fff; font-size: 14px;margin-right:5px;'><span>미리보기</span></a>";
					html += 		"<a href='javascript:convertImageProcess(\"download\");' class='default-color btn-left-mg' style='padding: 5px; width: 80px;background: #0078A8;color: #fff; font-size: 14px;'><span>저장</span></a>";
					html += 	"</div>";
					html += "</div>";
					this._div.innerHTML = html; 
				};
				setUI.addTo(this.map.gMap);
				$(".containerBox").append($(".png_save_box").detach());
			},
			//20년수정반영 끝 (이미지 저장 팝업)
			
			/**
			 * 
			 * @name         : createTechPOIBtn
			 * @description  : 기술창업통계지도의 외부POI버튼을 생성한다.
			 * @date         : 2016. 10. 19. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createTechPOIBtn = function() {
				var poiUI = sop.control({position: 'topright'});
				poiUI.onAdd = function (map) {
				    this._div = sop.DomUtil.create('div', 'info');
				    sop.DomEvent.disableClickPropagation(this._div);
				    this.update();
				    $(this._div).attr("id", 'poi_' +that.id);
				    that.poiObj = this._div;
				    return this._div;
				};
				poiUI.update = function (props) {
					var html = "";
					html += "<div class='mapBtnWrapper' data-html2canvas-ignore=true>";
					html += "<a class='rightQuick rq01'><span>GPS</span></a>";
					html += 	"<ul class='rqListBox rq01' style='width:330px;'>";	
					html +=		"<li><a class='ico_side_Select'><span id='industry'>산업<br />분류</span></a>";
					html +=			"<ol class='rqIcon09'>";
					html += 			"<li>";
	    			html +=					"<div class='sidePopTree'>";
	    			html +=						"<p class='tit' style='text-align:center;'>전국사업체조사 10차산업분류표 위치조회</p>";
	    			html +=						"<div class='etcPopScroll'>";
					html +=		    				"<div class='tree'></div>"; 
			        html +=						"</div>";
	    			html +=					"</div>";
	    			html +=				"</li>";
	    			html +=			"</ol>";
					html +=    	"</li>";
					html += 	"<li><a><span>기술</span></a>";	
					html += 		"<ol class='rqIcon11' style='width:250px;'></ol>";    				
					html += 	"</li>";     			    		
					html += 	"<li><a class='ico_side_Select'><span>교통</span></a>";      			
					html += 		"<ol class='rqIcon03'></ol>";    				
					html += 	"</li>";    				
					html +=    	"<li><a class='ico_side_Select'><span>공공</span></a>";
					html +=    		"<ol class='rqIcon06'></ol>";
					html +=    	"</li>";  
					html +=    	"<li><a class='ico_side_Select'><span>교육</span></a>";
					html +=    		"<ol class='rqIcon07'></ol>";
					html +=    	"</li>"; 
					html +=    	"<li><a class='ico_side_Select'><span>편의<br/>문화</span></a>";
					html +=    		"<ol class='rqIcon00'></ol>";
					html +=    	"</li>";
					html +=    	"<li id='poiInit_"+that.id+"'><a class='ico_side_Select'><span>초기화</span></a>";
					html +=    	"</li>";
					html += "</ul>";
					html += "</div>";
					this._div.innerHTML = html;
					 
				};
				poiUI.addTo(this.map.gMap);
						
				this.addTechPoiList();
				this.addTrafficPoiList();
				this.addPublicPoiList();
				this.addEduPoiList();
				this.addCulturePoiList();
				this.reqInterstryList(0, "9", null);
			},
			
			
			/**
			 * 
			 * @name         : createSettingBtn
			 * @description  : 인터랙티브맵의 설정버튼을 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createSettingBtn = function(type) {
				var setUI = sop.control({position: 'topright'});
				setUI.onAdd = function (map) {
				    this._div = sop.DomUtil.create('div', 'info');
				    sop.DomEvent.disableClickPropagation(this._div);
				    this.update();
				    $(this._div).attr("id", 'set_' +that.id);
				    that.setObj = this._div;
				    return this._div;
				};
				setUI.update = function (props) {
					var html = "";
					html += "<div class='mapBtnWrapper' data-html2canvas-ignore=true>";
					html += "<a href='javascript:void(0)' class='rightQuick rq02'><span>맵기능설정</span></a>";
					html += "<ul class='rqListBox rq02'>";
					
					if  (type == "intr") {
						html +=		"<li><a href='javascript:void(0)' class='ico_side_reset'><span>초기화</span></a></li>";
						html +=		"<li><a href='javascript:void(0)' class='ico_side_lv'><span>1레벨</span></a></li>";
						html +=		"<li><a href='javascript:void(0)' class='ico_side_Select multi_bound'><span>지역다중<br />선택</span></a></li>"; 
					}
					
					html +=		"<li><a href='javascript:void(0)' class='ico_side_map map_measure'><span>지도<br />측정</span></a></li>";
					html +=	"</ul>";
					html += "</div>";
					this._div.innerHTML = html;
					 
				};
				setUI.addTo(this.map.gMap);

				if  (type == "intr") {
					this.addBoundaryLevelList();
					this.addMultiSelectList();
				}else {
					$(".rqListBox.rq02").css("width", "42px");
				}
				this.addMeasureList();
			},
			
			
			/**
			 * 
			 * @name         : createMapTypeBtn
			 * @description  : 인터랙티브맵의 맵타입변경버튼을 생성한다.(일반/위성)
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createMapTypeBtn = function() {
				var mapUI = sop.control({position: 'topright'});
				mapUI.onAdd = function (map) {
				    this._div = sop.DomUtil.create('div', 'info');
				    sop.DomEvent.disableClickPropagation(this._div);
				    this.update();
				    $(this._div).attr("id", 'map_' +that.id);
				    that.mapObj = this._div;
				    return this._div;
				};
				mapUI.update = function (props) {
					var html = "";
					html += "<div class='mapBtnWrapper' data-html2canvas-ignore=true>";
					html += "<a class='rightQuick rq06'><span>GPS</span></a>";
					html += "<ul class='rqListBox rq06'>";
					
					//mng_s 20200414 이진호 settlite와 noraml에 id 생성
					//html += 	"<li><a name='settlite' id='settlite' class='ico_side_gps01'><span>위성</span></a></li>"; 
					//html += 	"<li><a name='normal' id='normal' class='ico_side_gps02'><span>일반</span></a></li>";
					html += 	"<li><a name='settlite' id='settlite' class='ico_side_gps01'><span>위성</span></a></li>"; 
					html += 	"<li><a name='normal' id='normal' class='ico_side_gps02'><span>일반</span></a></li>";
					//mng_e 20200414 이진호
					
					//20200525 수정 시작 (백지도 관련 주석제거)
					html += 	"<li id='backMap'><a name='white' class='ico_side_gps02'><span>백지도</span></a></li>"; 
					html += 	"<li id='white_child' style='margin-left: 78px;margin-top: 10px; display:none;'><a name='white_child' class='ico_side_gps02'><span>숨기기</span></a></li>";
					//20200525 수정 끝 (백지도 관련 주석제거)
					html += "</ul>";
					html += "</div>";
					this._div.innerHTML = html;
					 
				};
				mapUI.addTo(this.map.gMap);
			},
			
			
			
			/**
			 * 
			 * @name         : createZoomControl
			 * @description  : 인터랙티브맵의 줌 컨트롤을 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createZoomControl = function(type) {
				var zoomUI = sop.control({position: 'topright'});
				zoomUI.onAdd = function (map) {
				    this._div = sop.DomUtil.create('div', 'info');
				    sop.DomEvent.disableClickPropagation(this._div);
				    this.update();
				    $(this._div).attr("id", 'zoom_' +that.id);
				    that.zoomObj = this._div;
				    return this._div;
				};
				zoomUI.update = function (props) {
					var html = "";
					html += "<div class='mapZoomWrapper' data-html2canvas-ignore=true>"
					html += "<a class='rightQuick rq03'>확대하기</a>";
					if (type == "intr") {
						html += "<a class='rightQuick rq07'>이동</a>";
					}
					if (type == "intr") {
						html += "<a class='rightQuick rq04'>읍면동</a>";
					}else if (type == "biz") {
						html += "<a class='rightQuick rq04' style='top:32px;'>읍면동</a>";
					}
					if (type == "biz") {
						html += "<a class='rightQuick rq05' style='top:52px;'>축소하기</a>";
					}else if (type == "combine" || type == "thema") {
						html += "<a class='rightQuick rq05' style='top:32px;'>축소하기</a>";
					}else {
						html += "<a class='rightQuick rq05'>축소하기</a>";
					}
					html += "</div>";
					this._div.innerHTML = html;
					 
				};
				zoomUI.addTo(this.map.gMap);
			},
			
			/**
			 * 
			 * @name         : createZoomTypeBtn
			 * @description  : 인터랙티브맵의 줌컨트롤 타입변경버튼을 생성한다.
			 * @date         : 2020. 03. 11
			 * @author	     : 이진호
			 * @history 	 :
			 */
			this.createZoomTypeBtn = function() {
				var zoomBtnUI = sop.control({position: 'topright'});
				zoomBtnUI.onAdd = function (map) {
					this._div = sop.DomUtil.create('div', '');
					sop.DomEvent.disableClickPropagation(this._div);
					this.update();
					$(this._div).attr("id", 'zoomBtn_' +that.id);
					$(this._div).attr("name", 'zoomBtn');
					that.zoomBtnObj = this._div;
					return this._div;
				};
				zoomBtnUI.update = function (props) {
					var html = "";
					html += "<div class='zoomSliderBtn' style='display:none;' data-html2canvas-ignore=true>";
					html += "<button type='button'><img id='sliderBtnImg' src='/images/common/sliderbtn.png'></img></button>";
//					html += "<a class='zoomSliderBtn'><img src='/images/common/sliderbtn.png'></img></a>";
					html += "</div>";
					this._div.innerHTML = html;
					
				};
				zoomBtnUI.addTo(this.map.gMap);
			},
			/**
			 * 
			 * @name         : createEasyZoomControl
			 * @description  : 인터랙티브맵의 간편 줌 컨트롤을 생성한다.
			 * @date         : 2015. 10. 22. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createEasyZoomControl = function() {
				var zoomUI = sop.control({position: 'topright'});
				zoomUI.onAdd = function (map) {
				    this._div = sop.DomUtil.create('div', 'info');
				    sop.DomEvent.disableClickPropagation(this._div);
				    this.update();
				    $(this._div).attr("id", 'zoom_' +that.id);
				    that.zoomObj = this._div;
				    return this._div;
				};
				zoomUI.update = function (props) {
					var html = "";
					html += "<div data-html2canvas-ignore=true class='mapZoomWrapper' style='height:64px;'>"
					html += "<a class='rightQuick rq03'>확대하기</a>";
					html += "<a class='rightQuick rq05' style='top:32px;'>축소하기</a>";
					html += "</div>";
					this._div.innerHTML = html;
					 
				};
				zoomUI.addTo(this.map.gMap);
			}
			
			
			/**
			 * 
			 * @name         : addLifePoiList
			 * @description  : 생활서비스 POI정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addLifePoiList = function() {
				var html = "";
				html += "<li><a name='1001'><img src='/img/ico/ico_1001.png' alt='인테리어'/><span style='cursor:pointer;'>인테리어</span></a></li>";	
				html += "<li><a name='1002'><img src='/img/ico/ico_1002.png' alt='목욕탕'/><span style='cursor:pointer;'>목욕탕</span></a></li>";
				html += "<li><a name='1003'><img src='/img/ico/ico_1003.png' alt='교습학원'/><span style='cursor:pointer;'>교습학원</span></a></li>";
				html += "<li><a name='1004'><img src='/img/ico/ico_1004.png' alt='어학원'/><span style='cursor:pointer;'>어학원</span></a></li>";
				html += "<li><a name='1005'><img src='/img/ico/ico_1005.png' alt='예체능학원'/><span style='cursor:pointer;'>예체능학원</span></a></li>";
				html += "<li><a name='1006'><img src='/img/ico/ico_1006.png' alt='부동산중개업'/><span style='cursor:pointer;'>부동산중개업</span></a></li>";
				html += "<li><a name='1007'><img src='/img/ico/ico_1007.png' alt='이발소'/><span style='cursor:pointer;'>이발소</span></a></li>";    		
				html += "<li><a name='1008'><img src='/img/ico/ico_1008.png' alt='미용실'/><span style='cursor:pointer;'>미용실</span></a></li>";     			
				html += "<li><a name='1009'><img src='/img/ico/ico_1009.png' alt='세탁소'/><span style='cursor:pointer;'>세탁소</span></a></li>";    				
				html += "<li><a name='1010'><img src='/img/ico/ico_1010.png' alt='PC방'/><span style='cursor:pointer;'>PC방</span></a></li>";    				
				html += "<li><a name='1011'><img src='/img/ico/ico_1011.png' alt='노래방'/><span style='cursor:pointer;'>노래방</span></a></li>";     								
				$("#poi_" + that.id).find(".rqIcon01").append(html);
			},
			
			
			/**
			 * 
			 * @name         : addShopPoiList
			 * @description  : 도소매 POI정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addShopPoiList = function() {
				var html = "";
				html += "<li><a name='2001'><img src='/img/ico/ico_2001.png' alt='문구점'/><span style='cursor:pointer;'>문구점</span></a></li>";        				
				html += "<li><a name='2002'><img src='/img/ico/ico_2002.png' alt='서점'/><span style='cursor:pointer;'>서점</span></a></li>";    				
				html += "<li><a name='2003'><img src='/img/ico/ico_2003.png' alt='편의점'/><span style='cursor:pointer;'>편의점</span></a></li>";    				
				html += "<li><a name='2004'><img src='/img/ico/ico_2004.png' alt='식료품점'/><span style='cursor:pointer;'>식료품점</span></a></li>";    				
				html += "<li><a name='2005'><img src='/img/ico/ico_2005.png' alt='휴대폰점'/><span style='cursor:pointer;'>휴대폰점</span></a></li>";  
				html += "<li><a name='2006'><img src='/img/ico/ico_2006.png' alt='의류'/><span style='cursor:pointer;'>의류</span></a></li>";
				html += "<li><a name='2007'><img src='/img/ico/ico_2007.png' alt='화장품/방향제'/><span style='cursor:pointer;'>화장품/방향제</span></a></li>";
				html += "<li><a name='2008'><img src='/img/ico/ico_2008.png' alt='철물점'/><span style='cursor:pointer;'>철물점</span></a></li>";
				html += "<li><a name='2009'><img src='/img/ico/ico_2009.png' alt='주유소'/><span style='cursor:pointer;'>주유소</span></a></li>";
				html += "<li><a name='2010'><img src='/img/ico/ico_2010.png' alt='꽃집'/><span style='cursor:pointer;'>꽃집</span></a></li>";
				html += "<li><a name='2011'><img src='/img/ico/ico_2011.png' alt='슈퍼마켓'/><span style='cursor:pointer;'>슈퍼마켓</span></a></li>";
				$("#poi_" + that.id).find(".rqIcon02").append(html);
			},
			
			
			/**
			 * 
			 * @name         : addTrafficPoiList
			 * @description  : 교통 POI정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addTrafficPoiList = function() {
				var html = "";
				html += "<li><a name='3001'><img src='/img/ico/ico_3001.png' alt='지하철역'/><span style='cursor:pointer;'>지하철역</span></a></li>";    				
				html += "<li><a name='3002'><img src='/img/ico/ico_3002.png' alt='터미널'/><span style='cursor:pointer;'>터미널</span></a></li>";    						
				$("#poi_" + that.id).find(".rqIcon03").append(html);
			},
			
			
			/**
			 * 
			 * @name         : addLodgePoiList
			 * @description  : 숙박 POI정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addLodgePoiList = function() {
				var html = "";
				html += "<li><a name='4001'><img src='/img/ico/ico_4001.png' alt='호텔'/><span style='cursor:pointer;'>호텔</span></a></li>";
				html += "<li><a name='4002'><img src='/img/ico/ico_4002.png' alt='여관'/><span style='cursor:pointer;'>여관</span></a></li>"; 	
				html += "<li><a name='4003'><img src='/img/ico/ico_4003.png' alt='펜션'/><span style='cursor:pointer;'>펜션</span></a></li>";
				$("#poi_" + that.id).find(".rqIcon04").append(html);
			},
			
			
			/**
			 * 
			 * @name         : addRestaurantPoiList
			 * @description  : 음식점 POI정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addRestaurantPoiList = function() {
				var html = "";
				html += "<li><a name='5001'><img src='/img/ico/ico_5001.png' alt='한식'/><span style='cursor:pointer;'>한식</span></a></li>";
				html += "<li><a name='5002'><img src='/img/ico/ico_5002.png' alt='중식'/><span style='cursor:pointer;'>중식</span></a></li>";
				html += "<li><a name='5003'><img src='/img/ico/ico_5003.png' alt='일식'/><span style='cursor:pointer;'>일식</span></a></li>";
				html += "<li><a name='5004'><img src='/img/ico/ico_5004.png' alt='분식'/><span style='cursor:pointer;'>분식</span></a></li>";
				html += "<li><a name='5005'><img src='/img/ico/ico_5005.png' alt='서양식'/><span style='cursor:pointer;'>서양식</span></a></li>";
				html += "<li><a name='5006'><img src='/img/ico/ico_5006.png' alt='제과점'/><span style='cursor:pointer;'>제과점</span></a></li>";
				html += "<li><a name='5007'><img src='/img/ico/ico_5007.png' alt='패스트푸드'/><span style='cursor:pointer;'>패스트푸드</span></a></li>";
				html += "<li><a name='5008'><img src='/img/ico/ico_5008.png' alt='치킨'/><span style='cursor:pointer;'>치킨</span></a></li>";
				html += "<li><a name='5009'><img src='/img/ico/ico_5009.png' alt='호프/간이주점'/><span style='cursor:pointer;'>호프/간이주점</span></a></li>";
				html += "<li><a name='5010'><img src='/img/ico/ico_5010.png' alt='카페'/><span style='cursor:pointer;'>카페</span></a></li>";
				html += "<li><a name='5011'><img src='/img/ico/ico_5011.png' alt='기타 외국식'/><span style='cursor:pointer;'>기타 외국식</span></a></li>"; 
				$("#poi_" + that.id).find(".rqIcon05").append(html);
			},
			
			
			/**
			 * 
			 * @name         : addPublicPoiList
			 * @description  : 공공 POI정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addPublicPoiList = function() {
				var html = "";
				html += "<li><a name='6001'><img src='/img/ico/ico_6001.png' alt='우체국'/><span style='cursor:pointer;'>우체국</span></a></li>";
				html += "<li><a name='6002'><img src='/img/ico/ico_6002.png' alt='행정기관'/><span style='cursor:pointer;'>행정기관</span></a></li>";
				html += "<li><a name='6003'><img src='/img/ico/ico_6003.png' alt='경찰/지구대'/><span style='cursor:pointer;'>경찰/지구대</span></a></li>";
				html += "<li><a name='6004'><img src='/img/ico/ico_6004.png' alt='소방서'/><span style='cursor:pointer;'>소방서</span></a></li>"; 
				$("#poi_" + that.id).find(".rqIcon06").append(html);
			},
			
			
			/**
			 * 
			 * @name         : addEduPoiList
			 * @description  : 교육 POI정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addEduPoiList = function() {
				var html = "";
				html += "<li><a name='7001'><img src='/img/ico/ico_7001.png' alt='초등학교'/><span style='cursor:pointer;'>초등학교</span></a></li>";
				html += "<li><a name='7002'><img src='/img/ico/ico_7001.png' alt='중학교'/><span style='cursor:pointer;'>중학교</span></a></li>";
				html += "<li><a name='7003'><img src='/img/ico/ico_7001.png' alt='고등학교'/><span style='cursor:pointer;'>고등학교</span></a></li>";
				html += "<li><a name='7004'><img src='/img/ico/ico_7001.png' alt='전문대학'/><span style='cursor:pointer;'>전문대학</span></a></li>";
				html += "<li><a name='7005'><img src='/img/ico/ico_7001.png' alt='대학교'/><span style='cursor:pointer;'>대학교</span></a></li>";
				html += "<li><a name='7006'><img src='/img/ico/ico_7001.png' alt='대학원'/><span style='cursor:pointer;'>대학원</span></a></li>";
				html += "<li><a name='7007'><img src='/img/ico/ico_7001.png' alt='어린이보육업'/><span style='cursor:pointer;'>어린이보육업</span></a></li>";
				$("#poi_" + that.id).find(".rqIcon07").append(html);
			},
			
			
			/**
			 * 
			 * @name         : addCompanyPoiList
			 * @description  : 기업 POI정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addCompanyPoiList = function() {
				var html = "";
				html += "<li><a name='8001'><img src='/img/ico/ico_8001.png' alt='제조/화학'/><span style='cursor:pointer;'>제조/화학</span></a></li>";
				html += "<li><a name='8002'><img src='/img/ico/ico_8002.png' alt='서비스'/><span style='cursor:pointer;'>서비스</span></a></li>";
				html += "<li><a name='8003'><img src='/img/ico/ico_8003.png' alt='통신/IT'/><span style='cursor:pointer;'>통신/IT</span></a></li>";
				html += "<li><a name='8004'><img src='/img/ico/ico_8004.png' alt='건설'/><span style='cursor:pointer;'>건설</span></a></li>";
				html += "<li><a name='8005'><img src='/img/ico/ico_8005.png' alt='판매/유통'/><span style='cursor:pointer;'>판매/유통</span></a></li>";
				html += "<li><a name='8006'><img src='/img/ico/ico_8006.png' alt='기타금융업'/><span style='cursor:pointer;'>기타금융업</span></a></li>";
				html += "<li><a name='8007'><img src='/img/ico/ico_8007.png' alt='기타의료업'/><span style='cursor:pointer;'>기타의료업</span></a></li>";
				html += "<li><a name='8008'><img src='/img/ico/ico_8008.png' alt='문화/체육'/><span style='cursor:pointer;'>문화/체육</span></a></li>";
				$("#poi_" + that.id).find(".rqIcon08").append(html);
			},
			
			
			/**
			 * 
			 * @name         : addCulturePoiList
			 * @description  : 편의/문화 POI정보를 생성한다.
			 * @date         : 2016. 01. 08. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addCulturePoiList = function() {
				var html = "";
				html += "<li><a name='9001'><img src='/img/ico/ico_9001.png' alt='백화점/중대형마트'/><span style='cursor:pointer;'>백화점/중대형마트</span></a></li>";
				html += "<li><a name='9002'><img src='/img/ico/ico_9002.png' alt='은행'/><span>은행</span style='cursor:pointer;'></a></li>";
				html += "<li><a name='9003'><img src='/img/ico/ico_9003.png' alt='병원'/><span>병원</span style='cursor:pointer;'></a></li>";
				html += "<li><a name='9004'><img src='/img/ico/ico_9004.png' alt='극장/영화관'/><span style='cursor:pointer;'>극장/영화관</span></a></li>";
				html += "<li><a name='9005'><img src='/img/ico/ico_9005.png' alt='도서관/박물관'/><span style='cursor:pointer;'>도서관/박물관</span></a></li>";
				$("#poi_" + that.id).find(".rqIcon00").append(html);
			},
			
			
			/**
			 * 
			 * @name         : addTechPoiList
			 * @description  : 기술업종 POI정보를 생성한다.
			 * @date         : 2016. 10. 19. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addTechPoiList = function() {
				var html = "";
				html += "<li><a name='11'><img src='/img/tech/rqIcon09_list01.png' alt='첨단기술업종'/><span style='cursor:pointer;'>첨단기술업종</span></a></li>";
				html += "<li><a name='22'><img src='/img/tech/rqIcon09_list02.png' alt='ICT업종'/><span style='cursor:pointer;'>ICT업종</span></a></li>";
				html += "<li><a name='12'><img src='/img/tech/rqIcon09_list03.png' alt='고기술업종'/><span>고기술업종</span style='cursor:pointer;'></a></li>";
				html += "<li><a name='21'><img src='/img/tech/rqIcon09_list04.png' alt='창의및디지털업종'/><span style='cursor:pointer;'>창의및디지털업종</span></a></li>";
				html += "<li><a name='13'><img src='/img/tech/rqIcon09_list05.png' alt='중기술업종'/><span>중기술업종</span style='cursor:pointer;'></a></li>";
				html += "<li><a name='23'><img src='/img/tech/rqIcon09_list06.png' alt='전문서비스업종'/><span style='cursor:pointer;'>전문서비스업종</span></a></li>";
				html += "<li><a name='14'><img src='/img/tech/rqIcon09_list07.png' alt='저기술업종'/><span style='cursor:pointer;'>저기술업종</span></a></li>";
				$("#poi_" + that.id).find(".rqIcon11").append(html);
			},
						
			
			/**
			 * 
			 * @name         : addBoundaryLevelList
			 * @description  : 경계레벨설정정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addBoundaryLevelList = function() {
				var html = "";
				html +=	"<ul>"
				html +=		"<li><a name='level_0' class='ico_side_lv0'><span>0레벨</span></a></li>";
				html +=		"<li><a name='level_1' class='ico_side_lv1'><span>1레벨</span></a></li>";
				html +=		"<li><a name='level_2' class='ico_side_lv2'><span>2레벨</span></a></li>";
				html +=	"</ul>";
				$("#set_" + that.id).find(".ico_side_lv").parent().append(html);
			},
			
			
			/**
			 * 
			 * @name         : addMultiSelectList
			 * @description  : 다중경계설정정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addMultiSelectList = function() {
				var html = "";
				html +=	"<ul>";
				html +=		"<li><a name='each' class='ico_side_gae'><span>개별클릭</span></a></li>";
				html +=		"<li><a name='circle' class='ico_side_won'><span>원</span></a></li>";
				html +=		"<li><a name='rectangle' class='ico_side_sakak'><span>사각</span></a></li>";
				html +=		"<li><a name='multi' class='ico_side_dakak'><span>다각</span></a></li>";
				html +=		"<li><a name='clearSelected' class='ico_side_haejae'><span>선택<br />해제</span></a></li>";
				html +=	"</ul>";
				$("#set_" + that.id).find(".ico_side_Select").parent().append(html);
			},
			
			
			/**
			 * 
			 * @name         : addMeasureList
			 * @description  : 측정정보를 생성한다.
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.addMeasureList = function() {
				var html = "";
				html +=	"<ul>";
				html +=		"<li><a name='distance' class='ico_side_kuri'><span>거리</span></a></li>";
				html +=		"<li><a name='munjuk' class='ico_side_munjuk'><span>면적</span></a></li>";
				html +=		"<li><a name='clear' class='ico_side_haejae'><span>측정<br />해제</span></a></li>";
				html +=	"</ul>";
				$("#set_" + that.id).find(".ico_side_map").parent().append(html);

				var drawControl = new Draw.Control.Manager();
				drawControl.addControl(new Draw.Control.Measure(this.map.gMap));
				drawControl.addControl(new Draw.Control.Overlay(this.map.gMap));
				this.map.gMap.addControl(drawControl); 
				this.map.drawControl = drawControl;
			},
			
			
			/**
			 * 
			 * @name         : changeZoomLevelTitle
			 * @description  : 줌 종료시, 해당레벨의 단계를 표시한다.
			 * @date         : 2015. 10. 07. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.changeZoomLevelTitle = function(title) {
				$("#zoom_" + that.id).find(".rightQuick.rq04").text(title);
			};
			
			
			/**
			 * 
			 * @name         : closeMenu
			 * @description  : 지도버튼을 선택했을 때, 열려있던 메뉴를 닫는다.
			 * @date         : 2015. 10. 07. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.closeMenu = function() {
				//20200424 수정 시작 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
				$("#poi_" + that.id).find(".rightQuick.rq01").next(".rqListBox").stop().animate({"right":"-1200px"},0);//200423수정 (11번. 살고싶은 우리동네 데이터 보드 위에 ICON 올라와 있음,px 수정)
				$("#poi_" + that.id).find(".rightQuick.rq01").removeClass("on");
				$("#set_" + that.id).find(".rightQuick.rq02").next(".rqListBox").stop().animate({"right":"-800px"},0);//200423수정 (9번. 대화형통계지도 데이터보드 투명도 낮을 때 아이콘 보임 현상)
				$("#set_" + that.id).find(".rightQuick.rq02").removeClass("on");
				$("#map_" + that.id).find(".rightQuick.rq06").next(".rqListBox").stop().animate({"right":"-800px"},0);//200423수정 (11번. 살고싶은 우리동네 데이터 보드 위에 ICON 올라와 있음,px 수정)
				$("#map_" + that.id).find(".rightQuick.rq06").removeClass("on");
				//20200424 수정 끝 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
				this.initTree();
			},
			
			
			/**
			 * 
			 * @name         : initTree
			 * @description  : tree를 초기화한다..
			 * @date         : 2015. 10. 15. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.initTree = function() {
				this.curSelectedCompanyNode = null;
				if (this.companyTree != null) {
					this.companyTree.activateNode("");
					var nodes = this.companyTree.getAllNodes();
					for (var i=0; i<nodes.length; i++) {
						nodes[i].isExpanded = false;
					}
					this.companyTree.rebuildTree();
				}
			}
			
			
			/**
			 * 
			 * @name         : clearPOI
			 * @description  : 표출된 POI 정보를 초기화한다.
			 * @date         : 2015. 10. 07. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.clearPOI = function() {
				this.closeMenu();
				this.map.markers.clearLayers();
				this.center = null;
				this.mapBounds = null;
				this.themeCd = "";
				this.class_cd = "";
				this.resultcount = "500";
				selectedPoiTitle = "";
				this.isOpenPOI = false;
				this.isShow = false; //9월 서비스
				this.curSelectedCompanyNode = null;
			},
			
			
			/**
			 * 
			 * @name         : controlHide
			 * @description  : 컨트롤 버튼을 숨긴다.
			 * @date         : 2015. 10. 12. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.controlHide = function(name) {
				if (name == "poi") {
					$(this.poiObj).hide();
				}else if (name == "setting") {
					$(this.setObj).hide();
				}else if (name == "zoom") {
					$(this.mapObj).hide();
				}
			},
			
			
			/**
			 * 
			 * @name         : controlShow
			 * @description  : 컨트롤 버튼을 표출한다.
			 * @date         : 2015. 10. 12. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.controlShow = function(name) {
				if (name == "poi") {
					$(this.poiObj).show();
				}else if (name == "setting") {
					$(this.setObj).show();
				}else if (name == "zoom") {
					$(this.mapObj).show();
				}
			},
			
			
			/**
			 * 
			 * @name         : createSatelliteCRS
			 * @description  : 위성지도에 사용하는 좌표체계 생성
			 * @date         : 2015. 10. 15. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createSatelliteCRS = function() {
				srvLogWrite("C0", "06", "07", "00", "", "");		//위성지도보기
				var code = 'EPSG:900913';
				var def = '+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs';
				var options = {
					resolutions: [
						156543.0339,
						78271.51695,
						39135.758475,
						19567.8792375,
						9783.93961875,
						4891.969809375,
						2445.9849046875,
						1222.99245234375,
						611.496226171875,
						305.7481130859375,
						152.87405654296876,
						76.43702827148438,
						38.21851413574219,
						19.109257067871095,
						9.554628533935547,
						4.777314266967774,
						2.388657133483887,
						1.1943285667419434,
						0.5971642833709717,
						0.29858214168548586,
						0.14929107084274293
					],
					origin: [-20037508.34, 20037508.34]
				};

				// 새로 정의한 CRS 객체 생성.
				var crs = new sop.CRS.Proj(code, def, options);

				// projection 영역 설정.
				crs.projection.bounds = sop.bounds(
						[13232210.28055642, 3584827.864295762],
						[15238748.249933105, 5575460.5658249445]
				);

				return crs;
			},
			this.createEnglishCRS = function() {
				var code = 'EPSG:5179';
				var def = '+proj=tmerc +lat_0=38.0 +lon_0=127.5 ' +
					'+x_0=1000000.0 +y_0=2000000.0 +k=0.9996 +a=6378137.0 +b=6356752.3141403 ' +
					'+ellps=GRS80 +towgs84=0,0,0 +datum=WGS84 +no_defs';
				var options = {
					resolutions: [2088.96, 1044.48, 522.24, 261.12, 130.56, 65.28, 32.64, 16.32, 8.16, 4.08, 2.04, 1.02, 0.51],
					origin: [-200000, 4000000]
				};

				// 새로 정의한 CRS 객체 생성.
				var crs = new sop.CRS.Proj(code, def, options);

				// projection 영역 설정.
				crs.projection.bounds = sop.bounds(
						[-400000.0, -28024123.62],
						[10000000.62, 4000000.0]
				);

				return crs;
			},
			
			/**
			 * 
			 * @name         : createSatelliteTileLayer
			 * @description  : 위성 타일레이어 생성
			 * @date         : 2015. 10. 15. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createSatelliteTileLayer = function() {

				//mng_s 20201119 크롬에서 위성지도가 나오지 않아서 수정
				//var satTileURL = "http://xdworld.vworld.kr:8080/2d/Satellite/201301/{z}/{x}/{y}.jpeg";
				var satTileURL = "https://xdworld.vworld.kr/2d/Satellite/201301/{z}/{x}/{y}.jpeg";
				var satTileOptions = {
					maxZoom: 19,
					minZoom: 6
				};
				var satTileLayer = new sop.TileLayer(satTileURL, satTileOptions);
				return satTileLayer;
			},
			
			//20년수정반영 시작
			/**
			 * 
			 * @name         : createWhiteTileLayer
			 * @description  : 백지도 타일레이어 생성
			 * @date         : 2019. 8. 26. 
			 * @author	     : 이동진
			 * @history 	 :
			 */
			this.createWhiteTileLayer = function() {
				var url = "http://mapapi.ngii.go.kr:8013/openapi/Gettile.do?service=WMTS&request=GetTile&version=1.0.0&layer=english_map&style=korean&format=image/png&tilematrixset=korean&tilematrix=L{z}&tilerow={y}&tilecol={x}&apikey=04trYP9_xwLAfALjwZ-B8g";
				var options = {
						errorTileUrl: 'https://sgisapi.kostat.go.kr/tiles/missing.png',
						maxZoom: 13,
						minZoom: 0,
						zoomReverse: false,
						continuousWorld: false,
						tms: false, 
						resolutions : [2088.96, 1044.48, 522.24, 261.12, 130.56, 65.28, 32.64, 16.32, 8.16, 4.08, 2.04, 1.02, 0.51]
				};
				var layer = new sop.TileLayer(url, options);
				
				layer.fillZero = function (strB, strLen) {
					return '00000000'.substr(0, strLen - (strB + '').length) + strB;
				}
				
				layer.getTileUrl =  function (coords) {
					//var y = this.options.tms ? this._tileNumBounds.max.y - coords.y : coords.y;
					var res = [2088.96, 1044.48, 522.24, 261.12, 130.56, 65.28, 32.64, 16.32, 8.16, 4.08, 2.04, 1.02, 0.51][this._getZoomForUrl()];
					var bounds = this._tileCoordsToBounds(coords);
					return sop.Util.template(this._url, sop.extend({
				/*		x: Math.round((bounds.getSouthEast().x - (-200000))/(res*256)),
						y: Math.round((4000000 - bounds.getNorthWest().y )/(res*256)),
				*/      x : coords.x, 
					    y : coords.y,
						z:  this.fillZero((this._getZoomForUrl()+5).toString(10), 2)
					}, this.options));
					
				}
				return layer;
			},
/*			
			this.createWhiteTileLayer = function() {
				var url = "http://mapapi.ngii.go.kr:8013/openapi/Gettile.do";
				//?service=WMTS&request=GetTile&version=1.0.0&layer=english_map&style=korean&format=image/png&tilematrixset=korean&tilematrix=L{z}&tilerow={y}&tilecol={x}&apikey=04trYP9_xwLAfALjwZ-B8g";
				var options = {
						errorTileUrl: 'https://sgisapi.kostat.go.kr/tiles/missing.png',
						maxZoom: 13,
						minZoom: 0,
						service: 'WMTS',
						version: '1.0.0',
						layers: 'english_map',
						styles: 'korean',
						format: 'image/png',
					    apikey: '04trYP9_xwLAfALjwZ-B8g',
						resolutions: [2088.96, 1044.48, 522.24, 261.12, 130.56, 65.28, 32.64, 16.32, 8.16, 4.08, 2.04, 1.02, 0.51]
				};
				var layer = new sop.TileLayer.WMS(url, options);
				
				layer.fillZero = function (strB, strLen) {
					return '00000000'.substr(0, strLen - (strB + '').length) + strB;
				}
				
				layer.getTileUrl =  function (coords) {
					var tileBounds = this._tileCoordsToBounds(coords),
				    nw = this._crs.project(tileBounds.getNorthWest()),
				    se = this._crs.project(tileBounds.getSouthEast()),

				    bbox = (this._wmsVersion >= 1.3 && this._crs === sop.CRS.EPSG4326 ?
					    [se.y, nw.x, nw.y, se.x] :
						[nw.x, se.y, se.x, nw.y]).join(','),

					url = sop.TileLayer.prototype.getTileUrl.call(this, coords);

				return url +	sop.Util.getParamString(this.wmsParams, url, this.options.uppercase) +
							(this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;	
				}
				return layer;
			},
*/
			/**
			 * 
			 * @name         : createNomalTileLayer
			 * @description  : 일반 타일레이어 생성
			 * @date         : 2019. 8. 26. 
			 * @author	     : 이동진
			 * @history 	 :
			 */
			this.createNomalTileLayer = function() {
				
				var url = "https://sgisapi.kostat.go.kr/tiles/bmap4/L{z}/{y}/{x}.png";
				var options = {
						errorTileUrl: 'https://sgisapi.kostat.go.kr/tiles/missing.png',
						maxZoom: 13,
						minZoom: 0,
						zoomReverse: false,
						continuousWorld: false,
						tms: false
				};
				var layer = new sop.TileLayer(url, options);
				
				layer.fillZero = function (strB, strLen) {
					return '00000000'.substr(0, strLen - (strB + '').length) + strB;
				}
				
				layer.getTileUrl =  function (coords) {
					var y = this.options.tms ? this._tileNumBounds.max.y - coords.y : coords.y;
					return sop.Util.template(this._url, sop.extend({
						x: 'C' + this.fillZero(coords.x.toString(16), 8),
						y: 'R' + this.fillZero(y.toString(16), 8),
						z: this.fillZero(this._getZoomForUrl().toString(10), 2)
					}, this.options));
				}
				return layer;
			},
			//20년수정반영 끝
			
			/**
			 * 
			 * @name         : createTileLayer
			 * @description  : 타일레이어 토글버튼 생성
			 * @date         : 2015. 10. 15. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.createTileLayer = function(map, crs, baseLayer, targetLayer, zoomMargin) { //20200511 수정 (type 파라미터 삭제 - 위성지도 / 일반 지도 전환시 중심점 위치가 전혀 엉뚱한 곳으로 전환됨 )
				if(arguments.length < 5) {
					throw new Error('Fail check arguments length. current = ' + arguments.length);
				}
	
				if(map.hasLayer(baseLayer)){
					return;
				}
				var center = map.getCenter();
				var zoom = that.map.zoom;
				map.removeLayer(targetLayer);
				map.options.crs = crs;
				baseLayer.addTo(map);
				// 20200511 수정 시작 (주석처리 - 위성지도 / 일반 지도 전환시 중심점 위치가 전혀 엉뚱한 곳으로 전환됨 )
				/*
				that.map.setMapMaxExpnsnLevel(type);
					
				if(type == "settlite")
				{
					zoom = zoom + 6;
				}
				*/
				// 20200511 수정 끝 (주석처리 - 위성지도 / 일반 지도 전환시 중심점 위치가 전혀 엉뚱한 곳으로 전환됨 )
				that.map.setFixedBoundLevel(that.map.isFixedBound);// 20200511 수정 (소스추가 - 위성지도 / 일반 지도 전환시 중심점 위치가 전혀 엉뚱한 곳으로 전환됨 )
				that.map.mapMove([center.x, center.y], zoom);
			},
			
			
			/**
			 * 
			 * @name         : doClearSelectedBound
			 * @description  : 다중경계 선택을 초기화한다.
			 * @date         : 2015. 10. 19. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.doClearSelectedBound = function() {
				$(".multi_bound").find("span").html("다중<br/>선택");
				for (var i=0; i<this.map.selectedBoundList.length; i++) {
					var layer = this.map.selectedBoundList[i];
					this.map.clearLayerStyle(layer);
				}
				this.map.selectedBoundList = [];
				this.map.setBoundSelectedMoode(null);
			},
			
			
			/**
			 * 
			 * @name         : setFixedBoundBtn
			 * @description  : 경계 고정/자동을 토클한다.
			 * @date         : 2015. 10. 19. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.setFixedBoundBtn = function(bool) {
				if (bool) {
					if ($("#zoom_" + that.id).find(".rightQuick.rq07.on").length == 0) {
						$("#zoom_" + that.id).find(".rightQuick.rq07").click();
					}
				}else {
					if ($("#zoom_" + that.id).find(".rightQuick.rq07.on").length != 0) {
						$("#zoom_" + that.id).find(".rightQuick.rq07").click();
						this.doClearSelectedBound();
						
					}
				}
			},
			
			
			/**
			 * 
			 * @name         : eventHandler
			 * @description  : 이벤트 핸들러
			 * @date         : 2015. 10. 06. 
			 * @author	     : 권차욱
			 * @history 	 :
			 */
			this.eventHandler = function() {
				if ($("#poi_" + that.id).find(".etcPopScroll").length) {
					$("#poi_" + that.id).find(".etcPopScroll").mCustomScrollbar({axis:"xy",advanced: { autoExpandHorizontalScroll: true }});
				}
				
				$("#poi_" + that.id).find(".rightQuick.rq01").click(function() {
					var on = $(this).hasClass("on");
					$("#poi_" + that.id).find(".rightQuick").removeClass("on");
					$("#poi_" + that.id).find(".rqListBox>li>ul, .rqListBox>li>ol").hide();
					$("#poi_" + that.id).find(".rqListBox>li>a").removeClass("on");
					$("#poi_" + that.id).find(".rqListBox").stop().animate({"right":"-1200px"},0);//200423수정 (9번. 대화형통계지도 데이터보드 투명도 낮을 때 아이콘 보임 현상) //20200424 수정 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
					if(!on){
						that.closeMenu();
						$(this).next(".rqListBox").stop().animate({"right":"45px"},0);//20200424 수정 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
						$(this).addClass("on");
					}else{
						$(this).next(".rqListBox").stop().animate({"right":"-1200px"},0);//200423수정 (9번. 대화형통계지도 데이터보드 투명도 낮을 때 아이콘 보임 현상) // 20200424 수정 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
						$(this).removeClass("on");
					}
				});
				
				$("#set_" + that.id).find(".rightQuick.rq02").click(function() {
					var on = $(this).hasClass("on");
					$("#set_" + that.id).find(".rightQuick").removeClass("on");
					$("#set_" + that.id).find(".rqListBox>li>ul, .rqListBox>li>ol").hide();
					$("#set_" + that.id).find(".rqListBox>li>a").removeClass("on");
					$("#set_" + that.id).find(".rqListBox").stop().animate({"right":"-800px"},0);//200423수정 (9번. 대화형통계지도 데이터보드 투명도 낮을 때 아이콘 보임 현상) //20200424 수정 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
					if(!on){
						that.closeMenu();
						$(this).next(".rqListBox").stop().animate({"right":"45px"},0);//20200424 수정 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
						$(this).addClass("on");
					}else{
						$(this).next(".rqListBox").stop().animate({"right":"-800px"},0);		//200423수정 (9번. 대화형통계지도 데이터보드 투명도 낮을 때 아이콘 보임 현상) //20200424 수정 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
						$(this).removeClass("on");
					}
				});
				
				$("#map_" + that.id).find(".rightQuick.rq06").click(function() {
					var on = $(this).hasClass("on");
					$("#map_" + that.id).find(".rightQuick").removeClass("on");
					if(!on){
						that.closeMenu();
						
						//mng_s 20201008 이진호
						//지도타입 변경 버튼 클릭시 위치 수정
						//$(this).next(".rqListBox").stop().animate({"right":"45px"},0); //20200424 수정 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
						$(this).next(".rqListBox").stop().animate({"right" : "0px"}, 0);
						//mng_e 20201008 이진호
						
						//mng_s 20201008 이진호
						//백지도 버튼 관련 css 수정
						$("#map_" + that.id).find("#backMap").click(function(){
							var backMap_on = $("#map_" + that.id).find("#backMap").find(".ico_side_gps02").hasClass("on");
							if(backMap_on){
								$("#white_child").css({
									"display" : "",
									"margin-top" : "2px"			
								});
							}
						});
						
						$("#map_" + that.id).find("#normal, #settlite").click(function(){
							$("#white_child").css({"display" : "none"});
						});
						//mng_e 20201008 이진호
						
						$(this).addClass("on");
					}else{
						$(this).next(".rqListBox").stop().animate({"right":"-800px"},0);//200423수정 (11번. 살고싶은 우리동네 데이터 보드 위에 ICON 올라와 있음,px 수정) //20200424 수정 (10번. 아이콘 우측에서 날라옴 200ms ==> 0ms)
						$(this).removeClass("on");
					} 
				}); 
				
				var settingList = ".rqListBox a";
				$("#poi_" + that.id).find(".rqListBox>li>a").click(function(){
					var on = $(this).hasClass("on"); 
					if(!on){
						$("#poi_" + that.id).find(".rqListBox>li>a").removeClass("on");
						$("#poi_" + that.id).find(".rqListBox>li>ul, .rqListBox>li>ol").hide();
						$(this).next("ul").show();
						$(this).next("ol").show();
						$(this).addClass("on");
					}else{
						that.isOpenPOI = false;
						$(this).next("ul").hide();
						$(this).next("ol").hide();
						$(this).removeClass("on");
						
						that.initTree();
					}
				});
				
				$("#set_" + that.id).find(".rqListBox>li>a").click(function(){
					//경계가 고정이고,
					//선택된 엘리먼트가 경계일때, 아무동작 없이 리턴한다.
					if ($(this).attr("class").indexOf("ico_side_lv") != -1 && that.map.isFixedBound) {
						messageAlert.open("알림", "경계고정일 경우, 경계레벨 0레벨만 지원합니다.<br>1레벨 또는 2레벨을 사용을 원하시면 경계고정을 풀어주세요.");
						return false;
					}
					
					var on = $(this).hasClass("on"); 
					if(!on){
						that.isOpenPOI = false;
						$("#set_" + that.id).find(".rqListBox>li>a").removeClass("on");
						$("#set_" + that.id).find(".rqListBox>li>ul, .rqListBox>li>ol").hide();
						$(this).next("ul").show();
						$(this).next("ol").show();
						$(this).addClass("on");
					}else{
						$(this).next("ul").hide();
						$(this).next("ol").hide();
						$(this).removeClass("on");
					}
				});
				
				$("#map_" + that.id).find(".rqListBox>li>a").click(function(){
					var on = $(this).hasClass("on"); 
					if(!on){
						that.isOpenPOI = false;
						$("#map_" + that.id).find(".rqListBox>li>a").removeClass("on");
						$("#map_" + that.id).find(".rqListBox>li>ul, .rqListBox>li>ol").hide();
						$(this).next("ul").show();
						$(this).next("ol").show();
						$(this).addClass("on");
					}else{
						$(this).next("ul").hide();
						$(this).next("ol").hide();
						$(this).removeClass("on");
					}
				});
				
				$(settingList).mouseover(function() {
					$(this).addClass("over");
				});
				
				$(settingList).mouseout(function() {
					$(this).removeClass("over");
				});
				

				var optionList = ".rqListBox>li>ul>li>a";
				$(optionList).click(function() {
					var val = $(this).html();
					$(this).parents("ul").eq(0).prev("a").empty().html(val).removeClass("on");
					$(this).parents("ul").eq(0).hide();
				});
				
				$("#poi_" + that.id).find("#industry").click(function(){
					var nowUrl = location.href;
					var on = $(this).parent().hasClass("on");
					if(!on){	
						if(nowUrl.match("interactive")){
							apiLogWrite2("A0","A12","POI",$("#industry").text(),"00","없음");
						}else{
							apiLogWrite2("B0","B17","POI",$("#industry").text(),"00","없음");							
						}
					}
				});
				//세부POI 선택
				$("#poi_" + that.id).find(".rqListBox>li>ol>li").click(function(){
					var className = $(this).parent().attr("class");
					
					//산업체 POI
					if (className == "rqIcon09") {
						
					}
					//초기화
					else if (className == "rqIcon10") {
						that.isOpenPOI = false;
					}
					//테마POI
					else {
						$(this).parent().hide();
						$(this).parent().parent().find("a").removeClass("on");
						that.isOpenPOI = true;
						var themeCd = $(this).find("a").attr("name");
						that.selectedPoiTitle =  $(this).find("span").text();
						
						if (that.map.isFixedBound) {
							messageConfirm.open(
									"알림",
									"경계고정 및 레벨선택을 해제합니다.",
									btns = [
											{
											    title : "확인",
											    fAgm : null,
											    disable : false,
											    func : function(opt) {
											    	$("#zoom_" + that.id).find(".rightQuick.rq07").click();
											    	that.map.markers.clearLayers();
													that.map.setZoom(10);
													setTimeout(function() {
														that.markerGroup = [];
														that.reqThemePoiInfo(themeCd,  "0");
													}, 500);	
											    }
											}
									]
							);
						}else {
							that.map.markers.clearLayers();
							that.map.setZoom(10);
							setTimeout(function() {
								that.isShow = true; //9월 서비스
								that.reqThemePoiInfo(themeCd,  "0");
							}, 500);	
						}
						var nowUrl = location.href;
						if(nowUrl.match("interactive")){
							apiLogWrite2("A0","A12","POI",that.selectedPoiTitle,"00","없음");
						}else{
							apiLogWrite2("B0","B17","POI",that.selectedPoiTitle,"00","없음");							
						}
					}
				});
				
				//세부설정 선택
				$("#set_" + that.id).find(".rqListBox>li>ul>li").click(function(e){
					var type = $(this).find("a").attr("name");
					var typeList = {
							"distance"  : 0,	//측정-거리
							"munjuk"    : 1,	//측정-면적
							"clear"	    : 2,	//측정초기화
							"circle"    : 3,	//다중경계-원
							"rectangle" : 4,	//다중경계-사각형	
							"multi"		: 5,	//다중경계-다각형
							"each"		: 6,	//다중경계-개별
							"normal"	: 7,	//경계기준-연동
							"fixed"		: 8,	//경계기준-고정
							"level_0"	: 9,	//경계레벨-0
							"level_1"	: 10,	//경계레벨-1
							"level_2"	: 11,	//경계레벨-2
							"clearSelected" : 12 //다중경계해제
					};
					
					switch(typeList[type]) {
						case 0:	//거리계산
							srvLogWrite("C0", "06", "04", "00", "거리", "");
							$("#mapRgn_"+(that.map.id+1)).find(".draw-distance-out").click();
							break;
						case 1:	//면적계산
							srvLogWrite("C0", "06", "04", "00", "면적", "");
							$("#mapRgn_"+(that.map.id+1)).find(".draw-area-out").click();
							break;
						case 2:	//오버레이 초기화
							$("#set_"+that.id).find(".map_measure").find("span").html("지도<br/>측정");
							that.map.drawControl.removeOverlay();	
							break;
						case 3:	//원 영역
							srvLogWrite("C0", "06", "05", "00", "다중경계 원", "");		//지역다중선택 4종
							that.setFixedBoundBtn(true);
							that.map.setBoundSelectedMoode("circle");
							that.map.selectedBoundList = [];
							$("#mapRgn_"+(that.map.id+1)).find(".draw-circle-sub-out").click();
							break;
						case 4:	//사각형 영역
							srvLogWrite("C0", "06", "05", "00", "다중경계 사각형", "");		//지역다중선택 4종
							that.setFixedBoundBtn(true);
							that.map.setBoundSelectedMoode("rectangle");
							that.map.selectedBoundList = [];
							$("#mapRgn_"+(that.map.id+1)).find(".draw-rectangle-sub-out").click();
							break;
						case 5:	//다각형 영역
							srvLogWrite("C0", "06", "05", "00", "다중경계 다각형", "");		//지역다중선택 4종
							that.setFixedBoundBtn(true);
							that.map.setBoundSelectedMoode("polygon");
							that.map.selectedBoundList = [];
							$("#mapRgn_"+(that.map.id+1)).find(".draw-polygon-sub-out").click();
							break;
						case 6:	//개별경계
							srvLogWrite("C0", "06", "05", "00", "다중경계 개별", "");		//지역다중선택 4종
							that.setFixedBoundBtn(true);
							that.map.selectedBoundList = [];
							that.map.setBoundSelectedMoode("multi");
							break;
						case 9:	//경계레벨 0
							srvLogWrite("C0", "06", "06", "00", "경계레벨 0", "");
							that.map.setBoundLevel("0");
							that.map.lastGeojsonInfo = null; //9월 서비스
							break;
						case 10: //경계레벨 1
							srvLogWrite("C0", "06", "06", "00", "경계레벨 1", "");
							that.map.setBoundLevel("1");
							that.map.lastGeojsonInfo = null; //9월 서비스
							break;
						case 11: //경계레벨 2
							srvLogWrite("C0", "06", "06", "00", "경계레벨 2", "");
							that.map.setBoundLevel("2");
							that.map.lastGeojsonInfo = null; //9월 서비스
							break;
						case 12:
							that.doClearSelectedBound();
							that.setFixedBoundBtn(false);
							if (that.map.geojson) {
								that.map.clearDataOverlay();
							}
							break;
					}
					
				});
				
				//지도타입 선택
				$("#map_" + that.id).find(".rqListBox>li").click(function(){
					var type = $(this).find("a").attr("name");
					var zoomMargin, crs;
					
					if (type == "settlite") {
						that.map.mapMode = sop.mapMode = "settlite"; //20년수정반영
						crs = that.createSatelliteCRS();
						that.baseTileLayer = that.createSatelliteTileLayer();
						that.targetTileLayer = that.map.gMap.statisticTileLayer;
						zoomMargin = that.baseTileLayer.options.minZoom - that.targetTileLayer.options.minZoom;
						that.createTileLayer(that.map.gMap, crs, that.baseTileLayer, that.targetTileLayer, zoomMargin);// 20200511 수정 (type 파라미터 삭제 - 위성지도 / 일반 지도 전환시 중심점 위치가 전혀 엉뚱한 곳으로 전환됨 )
					}//20년수정반영 시작
					else if(type == "white"){
						 //$(".sop-tile-pane").css("z-index" , "7");
						 if(!that.baseTileLayer){
							 that.baseTileLayer = map.gMap.statisticTileLayer;
						 }
						 that.map.mapMode = sop.mapMode = "white";	 // 2019년반영 시작 djlee
						 crs = that.createEnglishCRS();
						 that.targetTileLayer 	= that.baseTileLayer;
						 that.baseTileLayer 	= that.createWhiteTileLayer();
						 zoomMargin 			= that.baseTileLayer.options.minZoom - that.targetTileLayer.options.minZoom;
						 that.createTileLayer(that.map.gMap, crs, that.baseTileLayer, that.targetTileLayer, zoomMargin);// 20200511 수정 (type 파라미터 삭제  - 위성지도 / 일반 지도 전환시 중심점 위치가 전혀 엉뚱한 곳으로 전환됨 )
					 }else if(type == "white_child"){
						 that.map.gMap.removeLayer(that.baseTileLayer );
					 }
					 //20년수정반영 끝
					 else {
					 	//20년수정반영 시작
					 	if(!that.baseTileLayer){
							 that.baseTileLayer = map.gMap.statisticTileLayer;
						 }
						 //20년수정반영 끝
						that.map.mapMode =  sop.mapMode = "normal"; // 20년수정반영
						that.targetTileLayer = that.baseTileLayer;
						that.baseTileLayer = map.gMap.statisticTileLayer;
						zoomMargin = that.baseTileLayer.options.minZoom - that.targetTileLayer.options.minZoom;
						that.createTileLayer(that.map.gMap, sop.CRS.UTMK, that.baseTileLayer, that.targetTileLayer, zoomMargin);// 20200511 수정 (type 파라미터 삭제 - 위성지도 / 일반 지도 전환시 중심점 위치가 전혀 엉뚱한 곳으로 전환됨 )
					}

					if (that.delegate && 
						that.delegate.callbackFunc && 
						that.delegate.callbackFunc.didMapChangeMode instanceof Function) {
						that.delegate.callbackFunc.didMapChangeMode(type, that.map);
					}
				});
				
				
				//초기화선택
				$("#set_" + that.id).find(".ico_side_reset").click(function() {
					$("#set_" + that.id).find(".map_measure").find("span").html("지도<br/>측정");
					$("#set_" + that.id).find(".ico_side_lv1").click();
					$("#set_" + that.id).find(".rightQuick.rq02").click();
					that.doClearSelectedBound();
					that.setFixedBoundBtn(false);
					that.map.drawControl.removeOverlay();	
					
					//20170310 leekh 초기화 추가
					//$interactiveMap.ui.doClearMap(1);
					
					//2017.03.28 하드코딩 수정
					if (that.delegate != undefined && that.delegate != null) {
						if (typeof that.delegate.doClearMap === "function") {
							that.delegate.doClearMap(that.map.id+1);
						}
					}
					
					
				});
				
				//zoom-in
				$("#zoom_" + that.id).find(".rightQuick.rq03").click(function() {
					//20200611 수정 시작 (ggm)
//					if(map.mapMode == "white" && (map.zoom == 0 || map.zoom == 1)){						
//						$("#map_" + that.id).find(".rqListBox>li>a[name='white']").trigger("click");
//					}
					//20200611 수정 끝
					if (!that.map.isFixedBound) {
						that.map.gMap.zoomIn(1);
					} 
					if (that.delegate != undefined && 
						that.delegate.callbackFunc != undefined &&
						that.delegate.callbackFunc.didMapZoomIn != undefined) {
						that.delegate.callbackFunc.didMapZoomIn(that.map);
					}
				});
				
				$("#zoom_" + that.id).find(".rightQuick.rq05").click(function() {	
					if (!that.map.isFixedBound) {
						that.map.gMap.zoomOut(1);
					} 
					if (that.delegate != undefined && 
							that.delegate.callbackFunc != undefined &&
							that.delegate.callbackFunc.didMapZoomOut != undefined) {
							that.delegate.callbackFunc.didMapZoomOut(that.map);
					}
				});
				
				//mng_s 20200603 이진호
				//rightQuick.rq03 (+) 에 mouseOver, mouseLeave시 설정
				var timeout1, timeout2;
				$("#zoom_" + that.id).find(".rightQuick.rq03").hover(function(){
					clearTimeout(timeout1);
					clearTimeout(timeout2);
					$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "");
					$("#zoomBtn_" + that.id).find("#sliderBtnImg").attr("src","\/images/common/sliderbtn.png");
					if($("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").css("display") =="none"){
						$("#zoomBtn_" + that.id).css({top : "-120px",left : "-30px"});
					}
					if($("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").css("display") !="none"){
//						$("#zoomBtn_" + that.id).css({top : "-265px",left : "-30px"});
						$("#zoomBtn_" + that.id).css({top : "-275px",left : "-30px"});
						$("#zoomBtn_" + that.id).find("#sliderBtnImg").attr("src","\/images/common/sliderOffBtn.png");
					}
					
				},function(){
					$("#zoomBtn_" + that.id).hover(function(){
						$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "");
					},function(){
						$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "none");
					});
					timeout1 = window.setTimeout(function(){
						if($("#zoomBtn_" + that.id + ":hover").length == 0){
							$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "none");
						}
					},1000);
				});
				
				//rightQuick.rq05 (-) 에 mouseOver, mouseLeave시 설정
				$("#zoom_" + that.id).find(".rightQuick.rq05").hover(function(){
					clearTimeout(timeout1);
					clearTimeout(timeout2);
					$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "");
					$("#zoomBtn_" + that.id).find("#sliderBtnImg").attr("src","\/images/common/sliderbtn.png");
					if($("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").css("display") =="none"){
						$("#zoomBtn_" + that.id).css({top : "-45px",left : "-30px"});
					}
					if($("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").css("display") !="none"){
						$("#zoomBtn_" + that.id).css({top : "-72px",left : "-30px"});
						$("#zoomBtn_" + that.id).find("#sliderBtnImg").attr("src","\/images/common/sliderOffBtn.png");
					}
					
				},function(){
					$("#zoomBtn_" + that.id).hover(function(){
						$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "");
					},function(){
						$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "none");
					});
					timeout2 = window.setTimeout(function(){
						if($("#zoomBtn_" + that.id + ":hover").length == 0){
							$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "none");
						}
					},1000);
				});
				
				var iHeight = $(window).height();
				$("#zoomBtn_" + that.id).find(".zoomSliderBtn").click(function(){
					var on = $(this).hasClass("on");
					var bnd_grid_on = $(".bnd_grid_radio").hasClass("on"); //행정구역 그리드 
					var tb_radio_on = $(".tb_radio").hasClass("on"); //사업체 전개도
					if(!on){
						$(this).addClass("on");
						$("#zoomBtn_" + that.id).find("#sliderBtnImg").attr("src","\/images/common/sliderOffBtn.png");
						$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "none");
						//$("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").css({"display": "","top" : "196.4px","left" : "5px", "z-index" : "99999"}); //zoomSlider none해제 
						$("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").css({"display": "","top" : "196px","left" : "5px", "z-index" : "99999"}); //zoomSlider none해제 
						//$("#zoomBtn_" + that.id).parent().children(".info.sop-control").css("top", "-145px");
						$("#zoomBtn_" + that.id).parent().children(".info.sop-control").css("top", "-153px");
						$("#zoom_" + that.id).prevAll(".sop-control-zoomSlider.sop-bar.sop-control").find("#zoomin").css("display", "none");
						$("#zoom_" + that.id).prevAll(".sop-control-zoomSlider.sop-bar.sop-control").find("#zoomout").css("display", "none");
						$("#zoom_" + that.id).find(".rightQuick.rq04").css("display", "none");
						//$("#zoom_" + that.id).find(".rightQuick.rq05").css("top", "199.4px");
						$("#zoom_" + that.id).find(".rightQuick.rq05").css("top", "207.4px");
						//$("#zoomBtn_" + that.id).parent().nextAll(".sop-bottom.sop-right").css("display", "none"); //minimap display none 처리
						//if(iHeight >= 750){
						$("#zoomBtn_" + that.id).parent().nextAll(".sop-bottom.sop-right").css("display", ""); //minimap display
						//}else{
							//$("#zoomBtn_" + that.id).parent().nextAll(".sop-bottom.sop-right").css("display", "none"); //minimap display 
						//}
						
						
						$("#zoom_" + that.id).prevAll(".sop-control-zoomSlider.sop-bar.sop-control").find(".sop-control-zoomSlider-slider.sop-control-background").css("top", "-3px");
						$("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").find(".sop-control-zoomSlider-bar-levelInfo-right-8.sop-control-zoomSlider-bar-levelInfo-background").css("transform", "translate3d(0px, 52px, 0px)"); 
						$("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").find(".sop-control-zoomSlider-bar-levelInfo-right-11.sop-control-zoomSlider-bar-levelInfo-background").css("transform", "translate3d(0px, 26px, 0px)");
						
						$("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").find(".sop-control-zoomSlider-margin_space.sop-bar-part.sop-bar-part-top.sop-control-background").css({
							"height" : "4px",
							"border-bottom" : "white"
						});
						$("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").find(".sop-control-zoomSlider-margin_space2.sop-bar-part.sop-bar-part-bottom.sop-control-background").css({
							"height" : "4px",
							"border-bottom" : "white"
						});
						
						//mng_s 20200630 이진호
						//사업체 전개도 및 행정구역 그리드가 on 일 때 zoomSlider 위치 조정
						if(bnd_grid_on){
							$("#view1").find("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").css("top", "108px");
						}
						if(tb_radio_on){
							$("#view1").find("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").css("top", "108px");
						}
						//mng_e 20200630 이진호
						
						//zoomSlider Bar level Info 클릭시 해당 레벨로 이동
						//$(".sop-control-zoomSlider-bar-levelInfo-right-11.sop-control-zoomSlider-bar-levelInfo-background").click(function(){
							//that.map.setZoom(9);
						//});
						
					}else{
						$(this).removeClass("on");
						$("#zoomBtn_" + that.id).find("#sliderBtnImg").attr("src","\/images/common/sliderbtn.png");
						$("#zoomBtn_" + that.id).find(".zoomSliderBtn").css("display", "none");
						$("#zoomBtn_" + that.id).parent().children(".info.sop-control").css("top", "");
						$("#zoomBtn_" + that.id).parent().children(".sop-control-zoomSlider.sop-bar.sop-control").css("display","none");
						$("#zoom_" + that.id).css('display', ''); // 일반 zoomControl css
						$("#zoomBtn_" + that.id).parent().nextAll(".sop-bottom.sop-right").css("display", ""); //minimap display  처리
						$("#zoom_" + that.id).find(".rightQuick.rq04").css("display", "");
						$("#zoom_" + that.id).find(".rightQuick.rq05").css("top", "");
					}
				});
				//mng_e 20200604 이진호
				
				$("#zoom_" + that.id).find(".rightQuick.rq07").click(function(){
					var on = $(this).hasClass("on");
					if(!on){
						$(this).addClass("on");
						$(this).css("background-image","url(/img/ico/ico_moveType02.png)");
						that.map.setBoundSelectedMoode("normal");
						that.map.setFixedBoundLevel(true);
						
						//mng_s 20200611 이진호
						//경계 고정일 경우 zoomSlide 클릭방지
						$("#zoom_" + that.id).prevAll(".sop-control-zoomSlider.sop-bar.sop-control").css("pointer-events", "none");
						//mng_e 20200611 이진호
						
						//고정일 경우,
						//경계레벨을 0레벨로 고정한다.
						$("#set_" + that.id).find(".ico_side_lv0").click();
						$("#set_" + that.id).find(".ico_side_lv").next().hide();
						
					}else{
						$(this).removeClass("on");
						$(this).css("background-image","url(/img/ico/ico_moveType01.png)");
						that.map.setFixedBoundLevel(false);
						
						if (that.map.isMultiSelectedBound) {
							that.doClearSelectedBound();
						}
						
						//mng_s 20200611 이진호
						//경계 고정일 경우 zoomSlide 클릭방지 해제
						$("#zoom_" + that.id).prevAll(".sop-control-zoomSlider.sop-bar.sop-control").css("pointer-events", "");
						//mng_e 20200611 이진호
						
						//고정을 해제할 경우,
						//경계레벨을 1레벨로 초기화한다.
						$("#set_" + that.id).find(".ico_side_lv1").click();
					} 
				}); 
				
				$("#poiInit_"+that.id).click(function() {
					that.isOpenPOI = false;
					that.map.markers.clearLayers();
					var on = $(this).find("a").hasClass("on");
					if (on) {
						$(this).find("a").removeClass("over");
						$(this).find("a").removeClass("on");
					}
				});
			},
			
			
			/**
			 * 
			 * @name          : reqThemePoiInfo
			 * @description   : 외부 POI정보를 호출한다.
			 * @date          : 2015. 10. 07. 
			 * @author	      : 권차욱
			 * @history 	  :
			 * @param themeCd : 테마코드
			 * @param pageNum : 페이지넘버
			 */
			this.reqThemePoiInfo = function(themeCd, pageNum) {
				this.themeCd = themeCd;
				this.pageNum = pageNum;
				this.mapBounds = this.map.gMap.getBounds();
				
				if (delegate) {
					if (delegate.setDataType) {
						delegate.setDataType(that.map.id, "poi");
					}
				}
				
				var area = "";
				area = 'RECTANGLE(';
				area += this.mapBounds._southWest.x + ' ' + this.mapBounds._southWest.y + ',';
				area += this.mapBounds._northEast.x + ' ' + this.mapBounds._northEast.y;
				area += ')';

				var sopOpenApiCompanySearchObj = new sop.openApi.companySearch.api();
				sopOpenApiCompanySearchObj.addParam("accessToken", accessToken);
				sopOpenApiCompanySearchObj.addParam("bnd_year", this.bndYear);
				sopOpenApiCompanySearchObj.addParam("year", this.year);
				sopOpenApiCompanySearchObj.addParam("area_type", "1");
				sopOpenApiCompanySearchObj.addParam("resultcount", this.resultcount);
				sopOpenApiCompanySearchObj.addParam("area", area);
				sopOpenApiCompanySearchObj.addParam("theme_cd", themeCd);
				sopOpenApiCompanySearchObj.addParam("pagenum", pageNum);
				
				var param = {
					"bnd_year"    : this.bndYear,
					"year" 	      : this.year,
					"area_type"   : "1",
					"area"		  : area,
					"theme_cd"	  : themeCd,
					"resultcount" : this.resultcount,
					"pagenum"	  : pageNum
				};
				// mng_s 20190404 김건민
				if(document.location.href.match("interactive")){
					srvLogWrite("C0", "06", "03", "00", themeCd, "");
				}else{
					srvLogWrite("G1", "11", "01", "00", that.selectedPoiTitle, "");
				}
				// mng_e 20190404 김건민
				sopOpenApiCompanySearchObj.request({
					method : "GET",
					async : false,
					url : openApiPath + "/OpenAPI3/stats/companysearch.json",
					options : {
						url : "/OpenAPI3/stats/companysearch.json",
						target : this,
						param : param,
						btntype: "poi",
						title : that.selectedPoiTitle,
						map : that.map
					}
				});
			},
			
			
			/**
			 * 
			 * @name            : reqCompanyPoiInfo
			 * @description     : 사업체 POI정보를 호출한다.
			 * @date            : 2015. 10. 15. 
			 * @author	        : 권차욱
			 * @history 	    :
			 * @param class_cd  : 사업체코드
			 * @param class_deg : 사업체차수
			 * @param pageNum : 페이지넘버
			 */
			this.reqCompanyPoiInfo = function(class_cd, class_deg, pageNum) {
				this.class_cd = class_cd;
				this.pageNum = pageNum;
				this.mapBounds = this.map.gMap.getBounds();
				
				if (delegate) {
					if (delegate.setDataType) {
						delegate.setDataType(that.map.id, "poi");
					}
				}
				
				var area = "";
				area = 'RECTANGLE(';
				area += this.mapBounds._southWest.x + ' ' + this.mapBounds._southWest.y + ',';
				area += this.mapBounds._northEast.x + ' ' + this.mapBounds._northEast.y;
				area += ')';
				
				
				srvLogWrite("C0", "06", "02", "00", "", "class_code:"+class_cd);

				var sopOpenApiCompanySearchObj = new sop.openApi.companyPoiSearch.api();
				sopOpenApiCompanySearchObj.addParam("accessToken", accessToken);
				sopOpenApiCompanySearchObj.addParam("bnd_year", this.bndYear);
				sopOpenApiCompanySearchObj.addParam("year", this.year);
				sopOpenApiCompanySearchObj.addParam("area_type", "1");
				sopOpenApiCompanySearchObj.addParam("resultcount", this.resultcount);
				sopOpenApiCompanySearchObj.addParam("area", area);
				sopOpenApiCompanySearchObj.addParam("class_code", class_cd);
				sopOpenApiCompanySearchObj.addParam("class_deg", class_deg);
				sopOpenApiCompanySearchObj.addParam("pagenum", pageNum);
				
				var param = {
					"bnd_year"    : this.bndYear,
					"year" 	      : this.year,
					"area_type"   : "1",
					"area"		  : area,
					"class_code"  : class_cd,
					"class_deg"	  : class_deg,
					"resultcount" : this.resultcount,
					"pagenum"	  : pageNum
				};
				
				sopOpenApiCompanySearchObj.request({
					method : "GET",
					async : false,
					url : openApiPath + "/OpenAPI3/stats/companysearch.json",
					options : {
						url : "/OpenAPI3/stats/companysearch.json",
						target : this,
						param : param,
						btntype: "poi",
						title : that.selectedPoiTitle,
						map : that.map
					}
				});
			},

			//20200611 수정 시작 (ggm)
			this.refreshWhiteMap = function() {
				if(that.map.mapMode == "white" && (that.map.zoom == 0 || that.map.zoom == 1)){
					var btnWhite = $("#map_" + that.id).find(".rqListBox>li>a[name='white']");
					if(btnWhite != undefined && btnWhite != null){
						btnWhite.trigger("click");
					}
				}
			}
			//20200611 수정 끝
			
			/**
			 * 
			 * @name         : reqInterstryList
			 * @description  : OpenAPI 산업체분류 정보를 조회한다.
			 * @date         : 2015. 10. 14. 
			 * @author	     : 권차욱
			 * @history 	 :
			 * @param params : 선택된 api 파라미터정보
			 * @param adm_cd : 행정동코드
			 * @param filterParam : 경계레이어 선택 시, 표출된 파라미터(key)정보
			 * @param title : 드랍한 버튼의 타이틀정보am
			 */
			this.reqInterstryList = function(depth, class_deg, class_cd) {
				var sopOpenApiInderstryCodeObj = new sop.openApi.InderstryList.api();
				sopOpenApiInderstryCodeObj.addParam("accessToken", accessToken);
				sopOpenApiInderstryCodeObj.addParam("class_deg", class_deg);
				if (class_cd != null) {
					sopOpenApiInderstryCodeObj.addParam("class_code", class_cd);
				}

				sopOpenApiInderstryCodeObj.request({
					method : "GET",
					async : true,
					url : openApiPath + "/OpenAPI3/stats/industrycode.json",
					options : {
						that : this,
						depth : depth,
						class_deg : class_deg,
						class_cd : class_cd
					}
				});
			}
			
			
			
		}
	};
	
	/** ********* 테마사업체 POI 조회 START ********* */
	(function () {
		$class("sop.openApi.companySearch.api").extend(sop.portal.absAPI).define({
			onSuccess : function (status, res, options) {
				var that = options.target;
				if (res.errCd == "0") {
					var totalCount = res.result[0].totalcount;
					var returnCount = res.result[0].returncount;
					var pageNum = res.result[0].pagenum; //9월 서비스
					var apicallCount = parseInt(totalCount / (parseInt(options.param.resultcount) * (pageNum + 1))); //9월 서비스

					if (returnCount !== totalCount && apicallCount > 0) {
							that.reqThemePoiInfo(options.param.theme_cd, pageNum + 1);
					}
					
					var theme_cd = "";
					if (options.param.theme_cd.length == 2) {
						theme_cd = options.param.theme_cd;
					}else {
						theme_cd = options.param.theme_cd.substring(0, 2) + '_' + options.param.theme_cd.substring(2, 4);
					}
							
					var poiList = res.result[0].company_list;
					if (poiList.length > 0) {
						for (var i = 0; i < poiList.length; i++) {
							that.markerGroup.push(poiList[i]);
							var markerIcon = sop.icon({
								iconUrl: '/img/marker/marker/' + theme_cd + '.png',
								shadowUrl: '/img/marker/theme_shadow.png',
								iconAnchor: [12.5, 40 ],
								iconSize: [ 25, 40 ],
								infoWindowAnchor: [1, -34]
							});
							
							var marker = sop.marker([ poiList[i].x, poiList[i].y ], {
								icon: markerIcon
							});
							
							marker.info = poiList[i];
							marker.addTo(that.map.markers);
							
							var tel_num = "";
							if (!sop.Util.isUndefined(poiList[i].tel_no)) {
								tel_num = poiList[i].tel_no;
							}
							var html ="";
							html += '<table style="text-align:left;width:auto;white-space: nowrap;word-break:break-all;padding:5px;" >';
							html += 	'<tr>';
							html += 		'<th style="word-break:break-all;width:30%;padding:5px;color: #3792de;font-size:14px;"><strong>' + poiList[i].corp_nm + '</strong></th>';
							html += 		'<td></td>';
							html += 	'</tr>';
							//html += 	'<tr>';
							//html += 		'<th style="word-break:break-all;white-space: nowrap;width:50px;padding:5px;font-size:12px;">&nbsp;' + poiList[i].naddr + '</th>';
							//html += 		'<td></td>';
							//html += 	'</tr>';
							html += '</table>';
							
							marker.bindInfoWindow(html);
						}
						
						//API 로그
						//apiLogWrite("A0", options);
					}
					else {
					}
				}
			},
			onFail : function (status) {
			}
		});
	}());
	/** ********* 테마사업체 POI 조회 END ********* */
	
	/** ********* 사업체 POI 조회 START ********* */
	(function () {
		$class("sop.openApi.companyPoiSearch.api").extend(sop.portal.absAPI).define({
			onSuccess : function (status, res, options) {
				var that = options.target;
				if (res.errCd == "0") {
					var result = res.result[0];
					var totalCount = result.totalcount;
					var returnCount = result.returncount;
					var pageNum = result.pagenum; //9월 서비스 
					var apicallCount = parseInt(totalCount / (parseInt(options.param.resultcount) * (pageNum + 1))); //9월 서비스

					if (returnCount !== totalCount && apicallCount > 0) {
							that.reqCompanyPoiInfo(options.param.class_code, options.param.class_deg, pageNum + 1);
					}
					
					var poiList = result.company_list;
					if (poiList.length > 0) {
						for (var i = 0; i < poiList.length; i++) {
							// 2016. 10. 04 수정 
							// 확인 부탁 드립니다요
							that.markerGroup.push(poiList[i]);
							var tempThemeCd = poiList[i].theme_cd;
							var markerIconImgPath = '';
							
							if (tempThemeCd != undefined) {
								var theme_cd = tempThemeCd.substring(0, 2) + '_' + tempThemeCd.substring(2, 4);
								markerIconImgPath = '/img/marker/marker/' + theme_cd + '.png';
							} else {
								markerIconImgPath = '/img/marker/thema_marker_default.png';
							}
							
							var markerIcon = sop.icon({
								iconUrl: markerIconImgPath,
								shadowUrl: '/img/marker/theme_shadow.png',
								iconAnchor: [12.5, 40 ],
								iconSize: [ 25, 40 ],
								infoWindowAnchor: [1, -34]
							});
							//
							
							var marker = sop.marker([ poiList[i].x, poiList[i].y ], {
								icon: markerIcon
							});
							
							marker.info = poiList[i];
							marker.addTo(that.map.markers);
							
							var tel_num = "";
							if (!sop.Util.isUndefined(poiList[i].tel_no)) {
								tel_num = poiList[i].tel_no;
							}
							var html ="";
							html += '<table style="text-align:left;width:auto;white-space: nowrap;word-break:break-all;padding:5px;" >';
							html += 	'<tr>';
							html += 		'<th style="word-break:break-all;width:30%;padding:5px;color: #3792de;font-size:14px;"><strong>' + poiList[i].corp_nm + '</strong></th>';
							html += 		'<td></td>';
							html += 	'</tr>';
							//html += 	'<tr>';
							//html += 		'<th style="word-break:break-all;white-space: nowrap;width:50px;padding:5px;font-size:12px;">&nbsp;' + poiList[i].naddr + '</th>';
							//html += 		'<td></td>';
							//html += 	'</tr>';
							html += '</table>';
							
							marker.bindInfoWindow(html);
							
						}
						
						//API 로그
						//apiLogWrite("A0", options);
					}
					else {
					}
				}
			},
			onFail : function (status) {
			}
		});
	}());
	/** ********* 사업체 POI 조회 END ********* */
	
	/** ********* OpenAPI 산업체분류 Start ********* */
	(function() {
		$class("sop.openApi.InderstryList.api").extend(sop.portal.absAPI)
		.define(
				{
					onSuccess : function(status, res, options) {
						var result = res.result;
						var that = options.that;
						if (res.errCd == "0") {
							var tmpData = [];
							for(var i=0; i < result.length; i++) {
								var tmpObj = {};
								tmpObj.id = that.id + "_" + result[i].class_code + "_" + options.depth;
								tmpObj.cd = result[i].class_code;
 								tmpObj.text = result[i].class_nm;
								tmpObj.depth = options.depth + 1;
								tmpObj.reqIcon = true;
								
								if (options.depth < 3) {
									tmpObj.children = [{"id": tmpObj.id + "_progress", "iconCls": "icon-tree-loading", "text": "Loading"}];
									tmpObj.state = "closed";
								}else {
									tmpObj.childCount = 0;
								}
								tmpData.push(tmpObj);								
							}
							
							if (that.companyTree == null) {
								if (options.depth == 0) {
									that.companyTree = $("#poi_" + that.id).find(".tree").easytree({
										data : tmpData,
										allowActivate: true,
							            disableIcons: true,
							            toggled : function(event, nodes, node) {
											if (node.childCount == null) {
												if (node.children.length > 0 ) {
													if(node.children[0].id == node.id + "_progress") {
														if (node.isExpanded) {
															that.reqInterstryList(
																	node.depth,
																	options.class_deg,
																	node.cd);
														}
													}
												}
											}
										},
										selected : function(node) {	
											var id = node.id.split("_")[1];
											that.curSelectedCompanyNode = node; 
											that.selectedPoiTitle = node.text;
										},
										iconSelected : function(e, id, node) {
											$("#poi_"+that.id).find(".rqIcon09").hide();
											$("#poi_"+that.id).find(".rqIcon09").prev().removeClass("on");
											var id = node.id.split("_")[1];
											that.isOpenPOI = true;
											that.map.markers.clearLayers();
											that.map.setZoom(10);
											setTimeout(function() {
												that.markerGroup = [];
												that.reqCompanyPoiInfo(id, "10", 0);		//leekh 20190430 9차에서 10차로 변경함
											}, 500);
										}
										
									});
								} 
							}else {
								for (var i=0; i<tmpData.length; i++) {
									that.companyTree.addNode(tmpData[i], that.id + "_" + options.class_cd + "_" +(options.depth-1));
								}
								that.companyTree.removeNode( that.id + "_" +options.class_cd + "_" + (options.depth-1) + "_progress");
								that.companyTree.rebuildTree();
							}
						} else if (res.errCd == "-401") {
							accessTokenInfo(function() {
								that.reqInterstryList(
										options.depth,
										options.class_deg,
										options.class_cd);
							});
						} else {
							messageAlert.open("알림", res.errMsg);
						}
					},
					onFail : function(status) {
					}
				});
	}());
	/** ********* OpenAPI 산업체분류 End ********* */
	
	
	
}(window, document));
